<?xml version="1.0" encoding="UTF-8"?>

<!--
    Copyright (c) 2015 onox

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<PropertyList>

    <!--
        Note: Properties in /systems/electrical/ are computed by
        Nasal/electrical.nas during replay, thus do not need to be
        recorded.
    -->

    <logic>
        <name>Lighting Landing On/Off</name>
        <input>
            <and>
                <less-than>
                    <property>/systems/electrical/outputs/landing-lights</property>
                    <value>31.5</value>
                </less-than>
                <greater-than>
                    <property>/systems/electrical/outputs/landing-lights</property>
                    <value>20.0</value>
                </greater-than>
            </and>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/landing</property>
        </output>
    </logic>

    <logic>
        <name>Lighting Taxi On/Off</name>
        <input>
            <and>
                <less-than>
                    <property>/systems/electrical/outputs/taxi-light</property>
                    <value>31.5</value>
                </less-than>
                <greater-than>
                    <property>/systems/electrical/outputs/taxi-light</property>
                    <value>20.0</value>
                </greater-than>
            </and>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/taxi</property>
        </output>
    </logic>

    <logic>
        <name>ALS Lighting Landing</name>
        <input>
            <and>
                <property>/sim/current-view/internal</property>
                <property>/sim/model/c182s/lighting/landing</property>
            </and>
        </input>
        <output>
            <property>/sim/rendering/als-secondary-lights/use-landing-light</property>
        </output>
    </logic>

    <logic>
        <name>ALS Lighting Taxi</name>
        <input>
            <and>
                <property>/sim/current-view/internal</property>
                <property>/sim/model/c182s/lighting/taxi</property>
            </and>
        </input>
        <output>
            <property>/sim/rendering/als-secondary-lights/use-alt-landing-light</property>
        </output>
    </logic>

    <filter>
        <name>Inst Red Factor</name>
        <type>gain</type>
        <gain>0.1</gain>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus1</property>
                  <not>
                    <property>/controls/switches/AVMBus2</property>
                  </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel-norm</property>
                    <property>/sim/model/c182s/lighting/dme-norm</property>
                    <property>/sim/model/c182s/lighting/nav-1-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <equals>
                      <property>/controls/lighting/radio-lights-norm</property>
                      <value>0.0</value>
                  </equals>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus2</property>
                  <not>
                     <property>/controls/switches/AVMBus1</property>
                  </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/nav-2-norm</property>
                    <property>/sim/model/c182s/lighting/adf-norm</property>
                    <property>/sim/model/c182s/lighting/ident-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus1</property>
                  <property>/controls/switches/AVMBus2</property>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel-norm</property>
                    <property>/sim/model/c182s/lighting/dme-norm</property>
                    <property>/sim/model/c182s/lighting/nav-1-norm</property>
                    <property>/sim/model/c182s/lighting/nav-2-norm</property>
                    <property>/sim/model/c182s/lighting/adf-norm</property>
                    <property>/sim/model/c182s/lighting/ident-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus1</property>
                    <not>
                       <property>/controls/switches/AVMBus2</property>
                    </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel</property>
                    <property>/sim/model/c182s/lighting/dme</property>
                    <property>/sim/model/c182s/lighting/nav-1</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus2</property>
                    <not>
                       <property>/controls/switches/AVMBus1</property>
                    </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/nav-2</property>
                    <property>/sim/model/c182s/lighting/adf</property>
                    <property>/sim/model/c182s/lighting/ident</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus2</property>
                    <property>/controls/switches/AVMBus1</property>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel</property>
                    <property>/sim/model/c182s/lighting/dme</property>
                    <property>/sim/model/c182s/lighting/nav-1</property>
                    <property>/sim/model/c182s/lighting/nav-2</property>
                    <property>/sim/model/c182s/lighting/adf</property>
                    <property>/sim/model/c182s/lighting/ident</property>
                </sum>
            </expression>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/inst-r-norm</property>
        </output>
    </filter>

     <filter>
        <name>Inst Green Factor</name>
        <type>gain</type>
        <gain>0.05</gain>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus1</property>
                  <not>
                    <property>/controls/switches/AVMBus2</property>
                  </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel-norm</property>
                    <property>/sim/model/c182s/lighting/dme-norm</property>
                    <property>/sim/model/c182s/lighting/nav-1-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <equals>
                      <property>/controls/lighting/radio-lights-norm</property>
                      <value>0.0</value>
                  </equals>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus2</property>
                  <not>
                     <property>/controls/switches/AVMBus1</property>
                  </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/nav-2-norm</property>
                    <property>/sim/model/c182s/lighting/adf-norm</property>
                    <property>/sim/model/c182s/lighting/ident-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus1</property>
                  <property>/controls/switches/AVMBus2</property>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel-norm</property>
                    <property>/sim/model/c182s/lighting/dme-norm</property>
                    <property>/sim/model/c182s/lighting/nav-1-norm</property>
                    <property>/sim/model/c182s/lighting/nav-2-norm</property>
                    <property>/sim/model/c182s/lighting/adf-norm</property>
                    <property>/sim/model/c182s/lighting/ident-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus1</property>
                    <not>
                       <property>/controls/switches/AVMBus2</property>
                    </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel</property>
                    <property>/sim/model/c182s/lighting/dme</property>
                    <property>/sim/model/c182s/lighting/nav-1</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus2</property>
                    <not>
                       <property>/controls/switches/AVMBus1</property>
                    </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/nav-2</property>
                    <property>/sim/model/c182s/lighting/adf</property>
                    <property>/sim/model/c182s/lighting/ident</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus2</property>
                    <property>/controls/switches/AVMBus1</property>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel</property>
                    <property>/sim/model/c182s/lighting/dme</property>
                    <property>/sim/model/c182s/lighting/nav-1</property>
                    <property>/sim/model/c182s/lighting/nav-2</property>
                    <property>/sim/model/c182s/lighting/adf</property>
                    <property>/sim/model/c182s/lighting/ident</property>
                </sum>
            </expression>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/inst-g-norm</property>
        </output>
    </filter>

    <filter>
        <name>Inst Blue Factor</name>
        <type>gain</type>
        <gain>0.05</gain>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus1</property>
                  <not>
                    <property>/controls/switches/AVMBus2</property>
                  </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel-norm</property>
                    <property>/sim/model/c182s/lighting/dme-norm</property>
                    <property>/sim/model/c182s/lighting/nav-1-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <equals>
                      <property>/controls/lighting/radio-lights-norm</property>
                      <value>0.0</value>
                  </equals>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus2</property>
                  <not>
                     <property>/controls/switches/AVMBus1</property>
                  </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/nav-2-norm</property>
                    <property>/sim/model/c182s/lighting/adf-norm</property>
                    <property>/sim/model/c182s/lighting/ident-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                  <greater-than>
                    <property>/controls/lighting/radio-lights-norm</property>
                    <value>0.0</value>
                  </greater-than>
                  <or>
                    <property>/controls/engines/engine/master-alt</property>
                    <property>/controls/engines/engine/master-bat</property>
                  </or>
                  <property>/controls/switches/AVMBus1</property>
                  <property>/controls/switches/AVMBus2</property>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel-norm</property>
                    <property>/sim/model/c182s/lighting/dme-norm</property>
                    <property>/sim/model/c182s/lighting/nav-1-norm</property>
                    <property>/sim/model/c182s/lighting/nav-2-norm</property>
                    <property>/sim/model/c182s/lighting/adf-norm</property>
                    <property>/sim/model/c182s/lighting/ident-norm</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus1</property>
                    <not>
                       <property>/controls/switches/AVMBus2</property>
                    </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel</property>
                    <property>/sim/model/c182s/lighting/dme</property>
                    <property>/sim/model/c182s/lighting/nav-1</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus2</property>
                    <not>
                       <property>/controls/switches/AVMBus1</property>
                    </not>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/nav-2</property>
                    <property>/sim/model/c182s/lighting/adf</property>
                    <property>/sim/model/c182s/lighting/ident</property>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <and>
                    <equals>
                        <property>/controls/lighting/radio-lights-norm</property>
                        <value>0.0</value>
                    </equals>
                    <or>
                      <property>/controls/engines/engine/master-alt</property>
                      <property>/controls/engines/engine/master-bat</property>
                    </or>
                    <property>/controls/switches/AVMBus2</property>
                    <property>/controls/switches/AVMBus1</property>
                </and>
            </condition>
            <expression>
                <sum>
                    <property>/sim/model/c182s/lighting/audio-panel</property>
                    <property>/sim/model/c182s/lighting/dme</property>
                    <property>/sim/model/c182s/lighting/nav-1</property>
                    <property>/sim/model/c182s/lighting/nav-2</property>
                    <property>/sim/model/c182s/lighting/adf</property>
                    <property>/sim/model/c182s/lighting/ident</property>
                </sum>
            </expression>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/inst-b-norm</property>
        </output>
    </filter>

    <!-- Reduce the red glow from the digits of the radio stack
         if the instrument lighting is at 100 %.
    -->
    <filter>
        <name>Inst Gain As Function Of Instrument Lighting</name>
        <type>gain</type>
        <input>
            <expression>
                <table>
                    <property>/systems/electrical/outputs/instrument-lights-norm</property>
                    <entry><ind>0.0</ind><dep>2.0</dep></entry>
                    <entry><ind>1.0</ind><dep>0.4</dep></entry>
                </table>
            </expression>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/inst-gain</property>
        </output>
    </filter>

    <filter>
        <name>RGB Red Rad Total</name>
        <type>gain</type>
        <input>
          <property>/sim/model/c182s/lighting/inst-r-norm</property>
          <scale>
              <property>/sim/model/c182s/lighting/inst-gain</property>
          </scale>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rad-r-total</property>
        </output>
    </filter>

    <filter>
        <name>RGB Red Totals</name>
        <type>gain</type>
        <input>
            <expression>
                <sum>
                    <property>/systems/electrical/outputs/instrument-lights-norm</property>
                    <property>/sim/model/c182s/lighting/rad-r-total</property>
                </sum>
            </expression>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rgb-ra-r-total</property>
        </output>
    </filter>

    <filter>
        <name>RGB Red Factor</name>
        <type>gain</type>
        <input>
            <property>/sim/model/c182s/lighting/ra-r</property>
            <scale>
                <property>/sim/model/c182s/lighting/rgb-ra-r-total</property>
            </scale>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rgb-ra-r-factor</property>
        </output>
    </filter>

    <filter>
        <name>RGB Green Rad Total</name>
        <type>gain</type>
        <input>
          <property>/sim/model/c182s/lighting/inst-g-norm</property>
          <scale>
              <property>/sim/model/c182s/lighting/inst-gain</property>
          </scale>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rad-g-total</property>
        </output>
    </filter>

    <filter>
        <name>RGB Green Totals</name>
        <type>gain</type>
        <input>
            <expression>
                <sum>
                    <property>/systems/electrical/outputs/instrument-lights-norm</property>
                    <property>/sim/model/c182s/lighting/rad-g-total</property>
                </sum>
            </expression>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rgb-ra-g-total</property>
        </output>
    </filter>

    <filter>
        <name>RGB Green Factor</name>
        <type>gain</type>
        <input>
            <property>/sim/model/c182s/lighting/ra-g</property>
            <scale>
                <property>/sim/model/c182s/lighting/rgb-ra-g-total</property>
            </scale>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rgb-ra-g-factor</property>
        </output>
    </filter>

    <filter>
        <name>RGB Blue Rad Total</name>
        <type>gain</type>
        <input>
          <property>/sim/model/c182s/lighting/inst-b-norm</property>
          <scale>
              <property>/sim/model/c182s/lighting/inst-gain</property>
          </scale>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rad-b-total</property>
        </output>
    </filter>

    <filter>
        <name>RGB Blue Totals</name>
        <type>gain</type>
        <input>
            <expression>
                <sum>
                    <property>/systems/electrical/outputs/instrument-lights-norm</property>
                    <property>/sim/model/c182s/lighting/rad-b-total</property>
                </sum>
            </expression>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rgb-ra-b-total</property>
        </output>
    </filter>

    <filter>
        <name>RGB Blue Factor</name>
        <type>gain</type>
        <input>
            <property>/sim/model/c182s/lighting/ra-b</property>
            <scale>
                <property>/sim/model/c182s/lighting/rgb-ra-b-total</property>
            </scale>
        </input>
        <output>
            <property>/sim/model/c182s/lighting/rgb-ra-b-factor</property>
        </output>
    </filter>

</PropertyList>
